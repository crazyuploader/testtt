name: CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
      - name: Check Python3 Version
        run: python3 --version

      - name: Install required libraries
        run: pip3 install --upgrade pyasn

      - name: Get latest BGP archives from Routeviews
        run: |
          wget https://raw.githubusercontent.com/hadiasghari/pyasn/master/pyasn-utils/pyasn_util_download.py
          wget https://raw.githubusercontent.com/hadiasghari/pyasn/master/pyasn-utils/pyasn_util_convert.py
          python3 pyasn_util_download.py --latestv46 --filename bgp_archive.bz2
          python3 pyasn_util_convert.py --single bgp_archive.bz2 bgp_archive.dat
          ls -lsh

      - name: Run get_as_prefixes.py
        run: |
          python3 get_as_prefixes.py
